<!DOCTYPE html>
<html lang="en">

    <head>
        <title>uMobile</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/jquerymobile/jqm.theme.css" type="text/css"/>
        <link rel="stylesheet" href="css/portal.css" type="text/css"/>
    </head>

    <!-- Include all required JS libraries -->
    <script type="text/javascript" charset="utf-8" src="lib/external/cordova.js"></script>
    <script type="text/javascript" charset="utf-8" src="lib/external/jquery-1.6.1.js"></script>
    <script type="text/javascript">
        $(document).bind("mobileinit", function(){
            $.extend(  $.mobile , {
              ajaxEnabled: false,
              ajaxFormsEnabled: false
            });
         });
        var localStorage;
    </script>
    <script type="text/javascript" charset="utf-8" src="lib/external/jquery.mobile-1.0rc1.js"></script>
    <script type="text/javascript" charset="utf-8" src="lib/external/gibberishAES.js"></script>
    <script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.3.1/underscore-min.js"></script>
    <script src="lib/external/backbone-0.9.2.js"></script>
    
    <!--  Include uMobile libraries and configuration -->
    <script src="config.js"></script>
    <script src="lib/umobile/authentication.js"></script>
    <script src="lib/umobile/umobile.js"></script>

    <body class="up fl-theme-iphone dashboard-grid">
  
        <!--  Main app home page.  Offers links to uMobile modules -->
        <div class="portal dashboard" data-role="page" id="home">
      
            <!-- Home screen titlebar -->
            <div data-role="header" data-backbtn="false" class="titlebar portlet-wrapper-titlebar">
                <h1 class="title">uMobile</h1>
                <a href="#prefs" class="ui-btn-right" data-transition="none" data-icon="gear">
                    <span>Prefs</span>
                </a>
            </div>
          
            <!-- Module links -->
            <div class="portal-nav">
            </div>
            
            <a href="index.html">reload</a>
            
            <div data-role="footer" class="umobile-auth-invitation" style="display:none;">
                <a href="#prefs" data-transition="none">You are using uMobile as a guest user.  Click here to log in!</a>
            </div>
        </div>

        <!--  Module IFrame. Displays WebView-based content -->
        <div class="portal focused" data-role="page" id="module">

            <!-- Module titlebar -->
            <div class="titlebar portlet-wrapper-titlebar" data-role="header" data-position="inline">
                <a href="#home" data-icon="home" data-direction="reverse" data-transition="none">Home</a>
                <h1 class="title module-page-title">Portlet</h1>
            </div>

            <!-- Module content  -->
            <iframe style="width: 100%; height:500px; border: none; padding: 0; margin: 0">
            </iframe>

        </div>


        <!--  Preferences page.  Offers authentication and other options. -->
        <div class="portal focused" data-role="page" id="prefs">

            <!-- Module titlebar -->
            <div class="titlebar portlet-wrapper-titlebar" data-role="header" data-position="inline">
                <a href="#home" data-icon="home" data-direction="reverse" data-transition="none">Home</a>
                <h1 class="title module-page-title">Preferences</h1>
            </div>

            <div class="portlet">
                <div class="portlet-content" data-role="content">
                </div>
            </div>

        </div>
      
    </body>

  <!-- Templates -->

    <script type="text/template" id="module-template">
        <a href="javascript:;" title="To view <%= title %>" class="ui-link">
            <span class="badge new-item"><%= newItemCount %></span>
            <span class="icon"><img class="portlet-icon" src="<%= iconUrl %>" alt=""/></span>
            <span class="title"><%= title %></span>
        </a>
    </script>
    
    <script type="text/template" id="auth-template">
        <form class="umobile-auth-form" action="javascript:;">
            <label for="usernameInput">Username:</label>
            <input id="usernameInput" name="username" type="text" value="<%= username %>"/>

            <label for="passwordInput">Password:</label>
            <input id="passwordInput" name="password" type="password" value="<%= password %>"/>

            <input type="submit" name="update" value="Update"/>
            <input type="button" class="logout-button" name="logout" value="Log out"/>
         </form>
    </script>

</html>
